/* =============================================================
   0. 초기화 (DROP: 기존 객체 삭제)
   - 에러 방지를 위해 테이블과 시퀀스를 모두 삭제합니다.
   ============================================================= */

-- 테이블 삭제
DROP TABLE TB_FAV_SHORT_FORM CASCADE CONSTRAINTS;
DROP TABLE TB_FAV_SINGER CASCADE CONSTRAINTS;
DROP TABLE TB_SHORT_FORM_HASHTAG CASCADE CONSTRAINTS;
DROP TABLE TB_API_SINGER CASCADE CONSTRAINTS;
DROP TABLE TB_API_SONG CASCADE CONSTRAINTS;
DROP TABLE TB_PLAYLIST_TRACK CASCADE CONSTRAINTS;
DROP TABLE TB_MAIN_UNIVERSE CASCADE CONSTRAINTS;
DROP TABLE TB_SHORT_FORM CASCADE CONSTRAINTS;
DROP TABLE TB_MEMBER_GENRE CASCADE CONSTRAINTS;
DROP TABLE TB_SHORT_FORM_COMMENT CASCADE CONSTRAINTS;
DROP TABLE TB_NOTICE_FILE CASCADE CONSTRAINTS;
DROP TABLE TB_MAIN_PLAYLIST CASCADE CONSTRAINTS;
DROP TABLE TB_COMMENT_REPORT CASCADE CONSTRAINTS;
DROP TABLE TB_LOCAL CASCADE CONSTRAINTS;
DROP TABLE TB_SHORT_FORM_REPORT CASCADE CONSTRAINTS;
DROP TABLE TB_NOTICE CASCADE CONSTRAINTS;
DROP TABLE TB_PLAYLIST_SONG_LIST CASCADE CONSTRAINTS;
DROP TABLE TB_UNI_HASHTAG CASCADE CONSTRAINTS;
DROP TABLE TB_TOKEN CASCADE CONSTRAINTS;
DROP TABLE TB_FAV_UNIVERSE CASCADE CONSTRAINTS;
DROP TABLE TB_NOTICE_IMG CASCADE CONSTRAINTS;
DROP TABLE TB_UNIVERSE_REPORT CASCADE CONSTRAINTS;
DROP TABLE TB_UNIVERSE_LIKED CASCADE CONSTRAINTS;
DROP TABLE TB_UNIVERSE CASCADE CONSTRAINTS;
DROP TABLE TB_PLAYLIST CASCADE CONSTRAINTS;
DROP TABLE TB_FAVORITE_SONG CASCADE CONSTRAINTS;
DROP TABLE TB_FAV_PLAYLIST CASCADE CONSTRAINTS;
DROP TABLE TB_SOCIAL CASCADE CONSTRAINTS;
DROP TABLE TB_GENRE CASCADE CONSTRAINTS;
DROP TABLE TB_MEMBER CASCADE CONSTRAINTS;

-- 시퀀스 삭제
DROP SEQUENCE SEQ_MEMBER_GENRE_NO;
DROP SEQUENCE SEQ_GENRE_ID;
DROP SEQUENCE SEQ_FAVORITE_SINGER_NO;
DROP SEQUENCE SEQ_SINGER_NO;
DROP SEQUENCE SEQ_API_SINGER_ID;
DROP SEQUENCE SEQ_HASHTAG_NO;
DROP SEQUENCE SEQ_SHORT_FORM_ID;
DROP SEQUENCE SEQ_COMMENT_ID;
DROP SEQUENCE SEQ_REPORT_ID;
DROP SEQUENCE SEQ_UNIVERSE_ID;
DROP SEQUENCE SEQ_PLAYLIST_ID;
DROP SEQUENCE SEQ_PLAYLIST_SONG_NO;
DROP SEQUENCE SEQ_SONG_NO;
DROP SEQUENCE SEQ_NOTICE_NO;
DROP SEQUENCE SEQ_FILE_ID;
DROP SEQUENCE SEQ_IMG_ID;
DROP SEQUENCE SEQ_TOKEN_ID;
DROP SEQUENCE SEQ_FAV_ID;
DROP SEQUENCE SEQ_FAV_UNIVERSE_NO;
DROP SEQUENCE SEQ_LIKE_ID;
DROP SEQUENCE SEQ_FAVORITE_SONG_NO;


/* =============================================================
   1. 시퀀스 생성 (Sequence Creation)
   - NOCACHE 적용 (안전성 강화)
   ============================================================= */
CREATE SEQUENCE SEQ_MEMBER_GENRE_NO START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE SEQ_GENRE_ID START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE SEQ_FAVORITE_SINGER_NO START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE SEQ_SINGER_NO START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE SEQ_API_SINGER_ID START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE SEQ_HASHTAG_NO START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE SEQ_SHORT_FORM_ID START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE SEQ_COMMENT_ID START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE SEQ_REPORT_ID START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE SEQ_UNIVERSE_ID START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE SEQ_PLAYLIST_ID START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE SEQ_PLAYLIST_SONG_NO START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE SEQ_SONG_NO START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE SEQ_NOTICE_NO START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE SEQ_FILE_ID START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE SEQ_IMG_ID START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE SEQ_TOKEN_ID START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE SEQ_FAV_ID START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE SEQ_FAV_UNIVERSE_NO START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE SEQ_LIKE_ID START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE SEQ_FAVORITE_SONG_NO START WITH 1 INCREMENT BY 1 NOCACHE;


/* =============================================================
   2. 테이블 생성 (Table Creation)
   - Oracle 12c+ 문법 적용: DEFAULT SEQ.NEXTVAL
   - 무결성 강화: CHECK (STATUS IN ('Y','N'))
   - 타입 강화: NVARCHAR2, VARCHAR2(1000)
   ============================================================= */

-- [1] 회원 및 인증
CREATE TABLE TB_MEMBER (
    MEMBER_ID       VARCHAR2(100) PRIMARY KEY,
    MBTI            VARCHAR2(10)  NOT NULL,
    MEMBER_JOB      NVARCHAR2(50),
    GENDER          VARCHAR2(50)  NOT NULL,
    GENRE           NVARCHAR2(50) NOT NULL,
    ROLE            VARCHAR2(20)  DEFAULT 'ROLE_USER' NOT NULL,
    STATUS          CHAR(1)       DEFAULT 'Y' CHECK (STATUS IN ('Y','N')) NOT NULL,
    UPDATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    CREATED_AT      DATE          DEFAULT SYSDATE NOT NULL ,
    NICKNAME        NVARCHAR2(50) NOT NULL UNIQUE,
    PHONE           VARCHAR2(20)  NOT NULL UNIQUE,
    MEMBER_NAME     NVARCHAR2(50) NOT NULL , 
    EMAIL           VARCHAR2(100) NOT NULL UNIQUE
);

CREATE TABLE TB_LOCAL (
    MEMBER_ID       VARCHAR2(100) PRIMARY KEY,
    PASSWORD        VARCHAR2(200) NOT NULL,
    CONSTRAINT FK_LOCAL_MEMBER FOREIGN KEY (MEMBER_ID) REFERENCES TB_MEMBER(MEMBER_ID)
);

CREATE TABLE TB_SOCIAL (
    MEMBER_ID       VARCHAR2(100) PRIMARY KEY,
    PROVIDER        VARCHAR2(20)  NOT NULL,
    CREATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    CONSTRAINT FK_SOCIAL_MEMBER FOREIGN KEY (MEMBER_ID) REFERENCES TB_MEMBER(MEMBER_ID)
);

CREATE TABLE TB_TOKEN (
    TOKEN_ID        NUMBER        DEFAULT SEQ_TOKEN_ID.NEXTVAL PRIMARY KEY, -- 오타 수정: TOEKEN -> TOKEN
    TOKEN           VARCHAR2(500) NOT NULL,
    EXPIRATION      DATE          NOT NULL,
    CREATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    MEMBER_ID       VARCHAR2(100) NOT NULL,
    CONSTRAINT FK_TOKEN_MEMBER FOREIGN KEY (MEMBER_ID) REFERENCES TB_MEMBER(MEMBER_ID)
);

-- [2] 장르 및 취향
CREATE TABLE TB_GENRE (
    GENRE_ID        NUMBER        DEFAULT SEQ_GENRE_ID.NEXTVAL PRIMARY KEY,
    GENRE_NAME      NVARCHAR2(30) NOT NULL
);

CREATE TABLE TB_MEMBER_GENRE (
    MEMBER_GENRE_NO NUMBER        DEFAULT SEQ_MEMBER_GENRE_NO.NEXTVAL PRIMARY KEY,
    MEMBER_ID       VARCHAR2(100) NOT NULL,
    GENRE_ID        NUMBER        NOT NULL,
    CONSTRAINT FK_MG_MEMBER FOREIGN KEY (MEMBER_ID) REFERENCES TB_MEMBER(MEMBER_ID),
    CONSTRAINT FK_MG_GENRE FOREIGN KEY (GENRE_ID) REFERENCES TB_GENRE(GENRE_ID)
);

-- [3] 유니버스 (Universe)
CREATE TABLE TB_UNIVERSE (
    UNIVERSE_ID     NUMBER        DEFAULT SEQ_UNIVERSE_ID.NEXTVAL PRIMARY KEY,
    TITLE           NVARCHAR2(100) NOT NULL,
    LAYOUT_DATA     CLOB,
    THEME_CODE      VARCHAR2(50),
    STATUS          CHAR(1)       DEFAULT 'Y' CHECK (STATUS IN ('Y','N')) NOT NULL,
    CREATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    UPDATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    MEMBER_ID       VARCHAR2(100) NOT NULL,
    THUMBNAIL_URL   VARCHAR2(1000) NOT NULL,
    CONSTRAINT FK_UNIVERSE_MEMBER FOREIGN KEY (MEMBER_ID) REFERENCES TB_MEMBER(MEMBER_ID)
);

CREATE TABLE TB_MAIN_UNIVERSE (
    MEMBER_ID       VARCHAR2(100) NOT NULL,
    UNIVERSE_ID     NUMBER        NOT NULL,
    CONSTRAINT PK_TB_MAIN_UNIVERSE PRIMARY KEY (MEMBER_ID, UNIVERSE_ID),
    CONSTRAINT FK_MAIN_UNI_MEMBER FOREIGN KEY (MEMBER_ID) REFERENCES TB_MEMBER(MEMBER_ID),
    CONSTRAINT FK_MAIN_UNI_UNI FOREIGN KEY (UNIVERSE_ID) REFERENCES TB_UNIVERSE(UNIVERSE_ID)
);

CREATE TABLE TB_UNI_HASHTAG (
    HASHTAG_NO      NUMBER        DEFAULT SEQ_HASHTAG_NO.NEXTVAL PRIMARY KEY,
    HASHTAG         NVARCHAR2(50) NULL,
    UNIVERSE_ID     NUMBER        NOT NULL,
    CONSTRAINT FK_UNI_TAG_UNI FOREIGN KEY (UNIVERSE_ID) REFERENCES TB_UNIVERSE(UNIVERSE_ID)
);

CREATE TABLE TB_FAV_UNIVERSE (
    FAV_UNIVERSE_NO NUMBER        DEFAULT SEQ_FAV_UNIVERSE_NO.NEXTVAL PRIMARY KEY,
    CREATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    UNIVERSE_ID     NUMBER        NOT NULL,
    UPDATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    MEMBER_ID       VARCHAR2(100) NOT NULL,
    CONSTRAINT FK_FAVU_UNI FOREIGN KEY (UNIVERSE_ID) REFERENCES TB_UNIVERSE(UNIVERSE_ID),
    CONSTRAINT FK_FAVU_MEMBER FOREIGN KEY (MEMBER_ID) REFERENCES TB_MEMBER(MEMBER_ID)
);

CREATE TABLE TB_UNIVERSE_LIKED (
    UNIVERSE_ID     NUMBER        NOT NULL,
    MEMBER_ID       VARCHAR2(100) NOT NULL,
    CONSTRAINT PK_UNI_LIKED PRIMARY KEY (UNIVERSE_ID, MEMBER_ID),
    CONSTRAINT FK_LIKED_UNI FOREIGN KEY (UNIVERSE_ID) REFERENCES TB_UNIVERSE(UNIVERSE_ID),
    CONSTRAINT FK_LIKED_MEMBER FOREIGN KEY (MEMBER_ID) REFERENCES TB_MEMBER(MEMBER_ID)
);

CREATE TABLE TB_UNIVERSE_REPORT (
    REPORT_ID       NUMBER        DEFAULT SEQ_REPORT_ID.NEXTVAL PRIMARY KEY,
    REASON_CODE     VARCHAR2(50)  NOT NULL,
    DESCRIPTION     NVARCHAR2(500) NULL,
    STATUS          CHAR(1)       DEFAULT 'Y' CHECK (STATUS IN ('Y','N')) NOT NULL,
    CREATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    MEMBER_ID       VARCHAR2(100) NOT NULL,
    UNIVERSE_ID     NUMBER        NOT NULL,
    CONSTRAINT FK_UNI_RPT_MEMBER FOREIGN KEY (MEMBER_ID) REFERENCES TB_MEMBER(MEMBER_ID),
    CONSTRAINT FK_UNI_RPT_UNI FOREIGN KEY (UNIVERSE_ID) REFERENCES TB_UNIVERSE(UNIVERSE_ID)
);

-- [4] 숏폼 (Short Form)
CREATE TABLE TB_SHORT_FORM (
    SHORT_FORM_ID   NUMBER        DEFAULT SEQ_SHORT_FORM_ID.NEXTVAL PRIMARY KEY,
    SHORT_FORM_TITLE NVARCHAR2(100) NOT NULL,
    VIDEO_URL       VARCHAR2(1000) NOT NULL, -- 길이 확장
    THUMBNAIL_URL   VARCHAR2(1000) NOT NULL, -- 길이 확장
    CAPTION         NVARCHAR2(1000),
    DURATION        NUMBER        NOT NULL,
    CREATED_AT      DATE          DEFAULT SYSDATE,
    MEMBER_ID       VARCHAR2(100) NOT NULL,
    STATUS          CHAR(1)       DEFAULT 'Y' CHECK (STATUS IN ('Y','N')) NOT NULL,
    UPDATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    CONSTRAINT FK_SHORT_MEMBER FOREIGN KEY (MEMBER_ID) REFERENCES TB_MEMBER(MEMBER_ID)
);

CREATE TABLE TB_SHORT_FORM_HASHTAG (
    HASHTAG_NO      NUMBER        DEFAULT SEQ_HASHTAG_NO.NEXTVAL PRIMARY KEY,
    HASHTAG         NVARCHAR2(50) NULL,
    SHORT_FORM_ID   NUMBER        NOT NULL,
    CONSTRAINT FK_SHORT_TAG_SHORT FOREIGN KEY (SHORT_FORM_ID) REFERENCES TB_SHORT_FORM(SHORT_FORM_ID)
);

CREATE TABLE TB_SHORT_FORM_COMMENT (
    COMMENT_ID      NUMBER        DEFAULT SEQ_COMMENT_ID.NEXTVAL PRIMARY KEY,
    CONTENT         NVARCHAR2(1000) NOT NULL,
    CREATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    SHORT_FORM_ID   NUMBER        NOT NULL,
    MEMBER_ID       VARCHAR2(100) NOT NULL,
    STATUS          CHAR(1)       DEFAULT 'Y' CHECK (STATUS IN ('Y','N')) NOT NULL,
    CONSTRAINT FK_COMMENT_SHORT FOREIGN KEY (SHORT_FORM_ID) REFERENCES TB_SHORT_FORM(SHORT_FORM_ID),
    CONSTRAINT FK_COMMENT_MEMBER FOREIGN KEY (MEMBER_ID) REFERENCES TB_MEMBER(MEMBER_ID)
);

CREATE TABLE TB_FAV_SHORT_FORM (
    LIKE_ID         NUMBER        DEFAULT SEQ_LIKE_ID.NEXTVAL PRIMARY KEY,
    CREATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    SHORTS_ID       NUMBER        NOT NULL,
    MEMBER_ID       VARCHAR2(100) NOT NULL,
    CONSTRAINT FK_FAV_SHORTS_ID FOREIGN KEY (SHORTS_ID) REFERENCES TB_SHORT_FORM(SHORT_FORM_ID),
    CONSTRAINT FK_FAV_SHORTS_MEMBER FOREIGN KEY (MEMBER_ID) REFERENCES TB_MEMBER(MEMBER_ID)
);

CREATE TABLE TB_SHORT_FORM_REPORT (
    REPORT_ID       NUMBER        DEFAULT SEQ_REPORT_ID.NEXTVAL PRIMARY KEY,
    REASON_CODE     VARCHAR2(50)  NOT NULL,
    DESCRIPTION     NVARCHAR2(500) NULL,
    STATUS          CHAR(1)       DEFAULT 'Y' CHECK (STATUS IN ('Y','N')) NOT NULL,
    CREATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    MEMBER_ID       VARCHAR2(100) NOT NULL,
    SHORTS_ID       NUMBER        NOT NULL,
    CONSTRAINT FK_SHORT_RPT_MEMBER FOREIGN KEY (MEMBER_ID) REFERENCES TB_MEMBER(MEMBER_ID),
    CONSTRAINT FK_SHORT_RPT_SHORT FOREIGN KEY (SHORTS_ID) REFERENCES TB_SHORT_FORM(SHORT_FORM_ID)
);

CREATE TABLE TB_COMMENT_REPORT (
    REPORT_ID       NUMBER        DEFAULT SEQ_REPORT_ID.NEXTVAL PRIMARY KEY,
    REASON_CODE     VARCHAR2(50)  NOT NULL,
    DESCRIPTION     NVARCHAR2(500) NULL,
    STATUS          CHAR(1)       DEFAULT 'Y' CHECK (STATUS IN ('Y','N')) NOT NULL,
    CREATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    COMMENT_ID      NUMBER        NOT NULL,
    MEMBER_ID       VARCHAR2(100) NOT NULL,
    CONSTRAINT FK_CMT_RPT_CMT FOREIGN KEY (COMMENT_ID) REFERENCES TB_SHORT_FORM_COMMENT(COMMENT_ID),
    CONSTRAINT FK_CMT_RPT_MEMBER FOREIGN KEY (MEMBER_ID) REFERENCES TB_MEMBER(MEMBER_ID)
);

-- [5] 플레이리스트 & 음악
CREATE TABLE TB_PLAYLIST (
    PLAYLIST_ID     NUMBER        DEFAULT SEQ_PLAYLIST_ID.NEXTVAL PRIMARY KEY,
    PLAYLIST_NAME   NVARCHAR2(100) NOT NULL,
    CREATED_AT      DATE          DEFAULT SYSDATE,
    MEMBER_ID       VARCHAR2(100) NOT NULL,
    UPDATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    CONSTRAINT FK_PLAYLIST_MEMBER FOREIGN KEY (MEMBER_ID) REFERENCES TB_MEMBER(MEMBER_ID)
);

CREATE TABLE TB_API_SINGER (
    SINGER_NO       NUMBER        DEFAULT SEQ_SINGER_NO.NEXTVAL PRIMARY KEY,
    API_SINGER_NAME NVARCHAR2(100) NOT NULL,
    SINGER_GENRE    NVARCHAR2(50) NOT NULL,
    SINGER_IMG_URL  VARCHAR2(1000) NULL,
    API_SINGER_ID   NUMBER        NOT NULL
);

CREATE TABLE TB_API_SONG (
    SONG_NO         NUMBER        DEFAULT SEQ_SONG_NO.NEXTVAL PRIMARY KEY,
    ARTIST_ID       VARCHAR2(100) NOT NULL,
    TRACK_ID        VARCHAR2(100) NOT NULL,
    ALBUM           NVARCHAR2(100) NOT NULL,
    DURATION        VARCHAR2(50)  NOT NULL,
    PREVIEW_URL     VARCHAR2(1000) NOT NULL,
    RELEASE_DATE    VARCHAR2(50)  NOT NULL,
    COVERIMG_URL    VARCHAR2(1000) NOT NULL,
    TITLE           NVARCHAR2(100) NOT NULL,
    ARTIST_NAME     NVARCHAR2(100) NOT NULL,
    GENRE_NAME      NVARCHAR2(50) NOT NULL
);

CREATE TABLE TB_PLAYLIST_TRACK (
    SONG_NO         NUMBER        NOT NULL, -- API_SONG과 동일 ID 사용 가정 시 SEQ 제외, 필요 시 추가
    ARTIST_ID       VARCHAR2(100) NOT NULL,
    TRACK_ID        VARCHAR2(100) NOT NULL,
    ALBUM           NVARCHAR2(100) NOT NULL,
    DURATION        VARCHAR2(50)  NOT NULL,
    PREVIEW_URL     VARCHAR2(1000) NOT NULL,
    RELEASE_DATE    VARCHAR2(50)  NOT NULL,
    COVERIMG_URL    VARCHAR2(1000) NOT NULL,
    TITLE           NVARCHAR2(100) NOT NULL,
    ARTIST_NAME     NVARCHAR2(100) NOT NULL,
    GENRE_NAME      NVARCHAR2(50) NOT NULL,
    CONSTRAINT PK_TB_PLAYLIST_TRACK PRIMARY KEY (SONG_NO)
);

CREATE TABLE TB_FAV_SINGER (
    FAVORITE_SINGER_NO NUMBER     DEFAULT SEQ_FAVORITE_SINGER_NO.NEXTVAL PRIMARY KEY,
    CREATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    UPDATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    MEMBER_ID       VARCHAR2(100) NOT NULL,
    SINGER_NO       NUMBER        NOT NULL,
    CONSTRAINT FK_FAV_SINGER_MEMBER FOREIGN KEY (MEMBER_ID) REFERENCES TB_MEMBER(MEMBER_ID),
    CONSTRAINT FK_FAV_SINGER_SINGER FOREIGN KEY (SINGER_NO) REFERENCES TB_API_SINGER(SINGER_NO)
);

CREATE TABLE TB_FAVORITE_SONG (
    FAVORITE_SONG_NO NUMBER       DEFAULT SEQ_FAVORITE_SONG_NO.NEXTVAL PRIMARY KEY,
    MEMBER_ID       VARCHAR2(100) NOT NULL,
    CREATE_AT       DATE          DEFAULT SYSDATE NOT NULL,
    UPDATE_AT       DATE          DEFAULT SYSDATE NOT NULL,
    SONG_NO         NUMBER        NOT NULL,
    TRACK_ORDER     NUMBER        NOT NULL,
    CONSTRAINT FK_FAV_SONG_MEMBER FOREIGN KEY (MEMBER_ID) REFERENCES TB_MEMBER(MEMBER_ID),
    CONSTRAINT FK_FAV_SONG_SONG FOREIGN KEY (SONG_NO) REFERENCES TB_API_SONG(SONG_NO)
);

CREATE TABLE TB_PLAYLIST_SONG_LIST (
    PLAYLIST_SONG_NO NUMBER       DEFAULT SEQ_PLAYLIST_SONG_NO.NEXTVAL PRIMARY KEY,
    PLAYLIST_ID     NUMBER        NOT NULL,
    SONG_ID         NUMBER        NOT NULL,
    TRACK_ORDER     NUMBER        NOT NULL,
    CREATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    UPDATE_AT       DATE          DEFAULT SYSDATE NOT NULL,
    CONSTRAINT FK_LIST_PLAYLIST FOREIGN KEY (PLAYLIST_ID) REFERENCES TB_PLAYLIST(PLAYLIST_ID),
    CONSTRAINT FK_LIST_SONG FOREIGN KEY (SONG_ID) REFERENCES TB_API_SONG(SONG_NO)
);

CREATE TABLE TB_MAIN_PLAYLIST (
    MEMBER_ID       VARCHAR2(100) NOT NULL,
    PLAYLIST_ID2    NUMBER        NOT NULL,
    CONSTRAINT PK_TB_MAIN_PLAYLIST PRIMARY KEY (MEMBER_ID, PLAYLIST_ID2),
    CONSTRAINT FK_MAIN_PL_MEMBER FOREIGN KEY (MEMBER_ID) REFERENCES TB_MEMBER(MEMBER_ID),
    CONSTRAINT FK_MAIN_PL_PL FOREIGN KEY (PLAYLIST_ID2) REFERENCES TB_PLAYLIST(PLAYLIST_ID)
);

CREATE TABLE TB_FAV_PLAYLIST (
    FAV_ID          NUMBER        DEFAULT SEQ_FAV_ID.NEXTVAL PRIMARY KEY,
    CREATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    MEMBER_ID       VARCHAR2(100) NOT NULL,
    PLAYLIST_ID     NUMBER        NOT NULL,
    UPDATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    CONSTRAINT FK_FAV_PL_MEMBER FOREIGN KEY (MEMBER_ID) REFERENCES TB_MEMBER(MEMBER_ID),
    CONSTRAINT FK_FAV_PL_PL FOREIGN KEY (PLAYLIST_ID) REFERENCES TB_PLAYLIST(PLAYLIST_ID)
);

-- [6] 공지사항 (Notice)
CREATE TABLE TB_NOTICE (
    NOTICE_NO       NUMBER        DEFAULT SEQ_NOTICE_NO.NEXTVAL PRIMARY KEY,
    NOTICE_TITLE    NVARCHAR2(100) NOT NULL,
    NOTICE_CONTENT  NVARCHAR2(3000) NOT NULL, -- 내용 길이 확장
    CREATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    STATUS          CHAR(1)       DEFAULT 'Y' CHECK (STATUS IN ('Y','N')) NOT NULL,
    MEMBER_ID       VARCHAR2(100) NOT NULL,
    UPDATED_AT      DATE          DEFAULT SYSDATE NOT NULL,
    CONSTRAINT FK_NOTICE_MEMBER FOREIGN KEY (MEMBER_ID) REFERENCES TB_MEMBER(MEMBER_ID)
);

CREATE TABLE TB_NOTICE_FILE (
    FILE_ID         NUMBER        DEFAULT SEQ_FILE_ID.NEXTVAL PRIMARY KEY,
    ORIGIN_NAME     NVARCHAR2(100) NOT NULL,
    CHANGE_NAME     NVARCHAR2(100) NOT NULL,
    STATUS          CHAR(1)       DEFAULT 'Y' CHECK (STATUS IN ('Y','N')) NOT NULL,
    NOTICE_NO       NUMBER        NOT NULL,
    CONSTRAINT FK_FILE_NOTICE FOREIGN KEY (NOTICE_NO) REFERENCES TB_NOTICE(NOTICE_NO)
);

CREATE TABLE TB_NOTICE_IMG (
    IMG_ID          NUMBER        DEFAULT SEQ_IMG_ID.NEXTVAL PRIMARY KEY,
    ORIGIN_NAME     NVARCHAR2(100) NOT NULL,
    CHANGE_NAME     NVARCHAR2(100) NOT NULL,
    STATUS          CHAR(1)       DEFAULT 'Y' CHECK (STATUS IN ('Y','N')) NOT NULL,
    NOTICE_NO       NUMBER        NOT NULL,
    CONSTRAINT FK_IMG_NOTICE FOREIGN KEY (NOTICE_NO) REFERENCES TB_NOTICE(NOTICE_NO)
);